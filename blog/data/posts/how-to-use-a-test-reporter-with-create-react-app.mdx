---
title: 'How To Use a Test Reporter With Create React App'
subtitle: 'Publishing tests results so you can examine them in your CI tool of choice'
date: '2021-03-20'
lastmod: '2021-03-20'
tags: ['react', 'Jest']
readingList: []
draft: false
summary: 'Publishing tests results so you can examine them in your CI tool of choice'
images: ['/static/images/blog/crareactjest.png']
---

<InlineImage
  src="/static/images/blog/crareactjest.png"
  alt="Cover image for this article featuring a React logo along with Jest logo"
  caption={
    <>
      Image source: <a href="https://reactjs.org/">React logo</a> and{' '}
      <a href="https://jestjs.io/">Jest logo</a>
    </>
  }
/>

The [Create React App](https://create-react-app.dev/) template comes with a lot of boilerplate code that should get you up and running with a simple [React](https://reactjs.org/) app in no time. You can then build on top of that and make it as swanky as you’d like.

If you open up the package.json file, you’ll see a few scripts you can run.

Create React App uses [Jest](https://jestjs.io/) as its test runner. Executing `npm run test` will run the unit tests that come pre-built with the app. I’ve added a few more tests to my demo app, so here’s my output after running the tests.

![Screenshot of all unit tests passing](https://cdn-images-1.medium.com/max/800/1*ZAB8IxqcPFRvV1Ag5XBgIw.png)

### How to use this in your build pipeline?

This is great — all the tests run and you also see the output in the console. However, when you run these tests in a continuous integration (CI) pipeline, you’d want a way to publish these test results so they can be visualized and analyzed easily. Every DevOps tool comes with its own UI baked into the product to visualize your test results and generate a report and for it to do so, it would expect to read the test results from an XML file produced by a test reporter. At the moment, we only print our test results to the console, but no such XML file is produced. Then how do we accomplish this task?

First, let’s install the npm package [jest-junit](https://www.npmjs.com/package/jest-junit). This is a test reporter for jest tests and is capable of producing an XML file that would contain the test results. We’ll then add a new script to your package.json file like the snippet below.

```
"test:ci": "npm run test -- --testResultsProcessor=\"jest-junit\""
```

This executes the same `npm run test` command but adds `--testResultsProcessor=“jest-junit”` instructing the test runner to use the jest-junit library as the test results processor and produce an XML file which by default, is named junit.xml. Running the command should now produce a junit.xml file in the root directory.

![Screenshot of what a junit.xml file looks like](https://cdn-images-1.medium.com/max/800/1*bX9dCRj-JN3s-zt-rNU1tw.png)

You don’t need to commit this file to your code repository. The build pipeline will produce this file and then in the next step, you can supply this file to the task that will publish the test results.

### Bonus: Adding code coverage

If you’d also like to produce a code coverage result, simply supply the additional arguments `--coverage --ci` and see the magic happen.

```
"test:ci": "npm run test -- --coverage --ci --testResultsProcessor=\"jest-junit\" --watchAll=false"
```

If you run this command in the console, you should see a table like this:

![Screenshot of test coverage results printed in the console](https://cdn-images-1.medium.com/max/800/1*YpqwNgVGaEQc163UqTKh5A.png)

Your code coverage results are also produced in the coverage folder like the screenshot below.

![Screenshot of the coverage folder including test coverage files](https://cdn-images-1.medium.com/max/800/1*YguU_eZudlxQc-4KOvNniw.png)

These files can then be supplied to the task that will publish code coverage results to your DevOps tool of choice.

That’s it. Thanks for reading!
